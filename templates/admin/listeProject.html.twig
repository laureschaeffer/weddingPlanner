{% extends 'adminBase.html.twig' %}

{% block title %}Demandes de projet{% endblock %}

{% block body %}

<section id="projets">

    <h1>Demandes de projet</h1>
    
    <h2>Demandes où doit être contactée la personne</h2>
    
    {% for pnt in projetNonTraites %}
    
        <div class="projet-card">
    
            <p>{{pnt}}, évènement le {{pnt.dateEvent | date("d.m.Y")}}, reçu le {{pnt.dateReceipt | date("d.m.Y")}} </p>
        
            <p> {{pnt.description}} </p>
            <p><a href="{{path('show_projet', {'id': pnt.id})}}">Voir plus</a></p>
        </div>
    
        {% else %}
        <p>Aucune demande à traiter</p>
    {% endfor %}
    
    
    <h2>Demandes où la personne a été contactée</h2>
    {% for projet in projetTraites %}
    
        <div class="projet-card">
            <div class="projet-card-content">
                {% if projet.user %}
                    <p>{{projet}}, évènement le {{projet.dateEvent | date("d.m.Y")}}, reçu le {{projet.dateReceipt | date("d.m.Y")}} </p>
                    {% else %}
                    <p>Anonyme, évènement le {{projet.dateEvent | date("d.m.Y")}}, reçu le {{projet.dateReceipt | date("d.m.Y")}} </p>
                {% endif %}
            
                <p> {{projet.description}} </p>
                <p><a href="{{path('show_projet', {'id': projet.id})}}">Voir plus</a></p>
            </div>
            <div class="projet-card-state">
                {# etat du projet  #}
                <p>
                    {# en attente ou en cours  #}
                    {% if projet.state.id == 1 or projet.state.id == 2 %}
                        <i class="fa-solid fa-hourglass-start"></i>
                    {# accepté  #}
                    {% elseif projet.state.id == 3 %}
                        <i class="fa-solid fa-circle-check"></i>
                    {# refusé  #}
                    {% elseif projet.state.id == 4 %}
                        <i class="fa-regular fa-circle-xmark"></i>
                    {% endif %}
                    {{projet.state}}
                </p>
            </div>
        </div>
        
        {% else %}
        <p>Aucune demande déjà traitée</p>
            
    {% endfor %}

</section>



{% endblock %}
