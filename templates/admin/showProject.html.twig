{% extends 'adminBase.html.twig' %}

{% block title %}Demande de contact{% endblock %}

{% block body %}


<section id="detail-projet">

    <h1>Détail d'une demande de contact</h1>
    
    {# en fonction de si la personne a été contactée  #}
    {% if project.isContacted %}
        <p><i class="fa-solid fa-circle-check"></i></p>
        {% else %}
        <p><i class="fa-solid fa-hourglass-start"></i></p>
    {% endif %}
    
    <div class="projet">
        <div class="projet-entete">
            <div class="projet-entete-flex">
                <p> {{project.firstName}} {{project.surname}}, reçu le {{project.dateReceipt | date("d.m.Y")}} </p>
                <p>Evenement le {{project.dateEvent | date("d.m.Y")}}</p>
                <p> <small>{{project.nbGuest}} invités</small></p>
            </div>
            <div class="projet-entete-flex">
                <p> {{project.telephone }} </p>
                <p> {{project.email}} </p>
            </div>
        </div>

        {# prestations  #}
        <p>Prestation(s) envisagée(s):</p>
        {% for presta in project.prestations %}
            <p>{{presta}}</p>
        {% endfor %}

        {# budget  #}
        <p>Budget: {{project.budget.minPrice |number_format(0, ',', ' ')}} - {{project.budget.maxPrice |number_format(0, ',', ' ')}} € </p>

        {# description  #}
        <p> {{project.description}} </p>

    </div>

    <h2>Suivi du projet</h2>
    {# suivi du projet, commentaires des personnes présentes sur le pannel admin  #}
    {% for comment in project.comments %}
        <p>Par {{comment.user}} le {{comment.datePost |format_datetime('short', 'short', locale='fr') }}</p>
        {# <p>Par {{comment.user}} le {{comment.datePost | date("d.m.Y")}}</p> #}
        <p>{{comment.content}} </p>
    {% endfor %}
    
    {{form(form)}}
    
    
    {% if app.user and "ROLE_SUPERADMIN" in app.user.roles %}
        
    {# en fonction de si le projet est terminé, bouton pour changer le statut de la demande  #}
        {% if project.isContacted %}
                <p><a href=" {{path('change_projet', {'id': project.id})}} ">Projet non fini</a></p>
        
            {% else %}
        
                <p><a href=" {{path('change_projet', {'id': project.id})}} ">Projet fini</a></p>
        {% endif %}
    {% endif %}

</section>

{% endblock %}
